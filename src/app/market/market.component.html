<section class="background-threads careers-threads">
  <div class="fade-in-section disable-fade-in is-visible fade-in-hero disable-transform">
    <div class="container hero-splash-container">
      <div class="row pv90-60">
        <div class="col-sm-12 col-md-8 hero-splash">
          <a class="hero-parent-title crown-link" routerLink="/markets">
            <h3 class="h1 small mb0 d-inline">{{ 'market.link' | translate }}</h3>
          </a>
          <h1 class="hero-title" style="color: white">{{ currentMarket }}</h1>
        </div>
        <div class="col-12"></div>
        <div class="col-sm-12 col-md-5"></div>
      </div>
    </div>
  </div>
</section>

<section class="background-grid-white"><div class="container teaser-container"><div class="header-subsection-date-section d-flex">
  <label class="header-subsection-date">{{ 'market.last_update' | translate }}: {{ lastUpdate }}</label>
</div>
  <p-progressSpinner *ngIf="!ready"></p-progressSpinner>
  <div class="row align-items-center justify-content-between" *ngIf="ready"><div class="col-sm-12 col-md-5 teaser-context pv120-90">
    {{ marketIntroText }}
  </div>
    <div class="col-sm-12 col-md-5 order-first teaser-image pv120-90" *ngIf="!isThereAlert">
      <h1 style="text-align:center">
        <p>{{ 'market.isMarket' | translate }}</p>
      </h1>
    </div>
    <div class="col-sm-12 col-md-5 order-first teaser-image pv120-90" *ngIf="isThereAlert"><div class="fade-in-section disable-fade-in is-visible">
      <div class=" gatsby-image-wrapper" style="position: relative; overflow: hidden; max-width: 533px; max-height: 400px;">
        <div aria-hidden="true" style="width: 100%; padding-bottom: 75.188%;"></div>
        <img aria-hidden="true" src="" alt="" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition-delay: 500ms;">
        <picture>
          <source [srcset]="marketImageUrl + ' 133w,' + marketImageUrl + ' 267w,' + marketImageUrl +' 533w,' + marketImageUrl +' 600w'" sizes="(max-width: 533px) 100vw, 533px">
          <img sizes="(max-width: 533px) 100vw, 533px"
               [srcset]="marketImageUrl + ' 133w,' + marketImageUrl + ' 267w,' + marketImageUrl +' 533w,' + marketImageUrl +' 600w'"
               [src]="marketImageUrl" [alt]="currentMarket" loading="lazy" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 1; transition: opacity 500ms ease 0s;">
        </picture>
        <noscript>
          <picture>
            <source [srcset]="marketImageUrl + ' 133w,' + marketImageUrl + ' 267w,' + marketImageUrl +' 533w,' + marketImageUrl +' 600w'" sizes="(max-width: 533px) 100vw, 533px" />
            <img loading="lazy" sizes="(max-width: 533px) 100vw, 533px" [srcset]="marketImageUrl + ' 133w,' + marketImageUrl + ' 267w,' + marketImageUrl +' 533w,' + marketImageUrl +' 600w'"
                 [src]="marketImageUrl" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/>
          </picture>
        </noscript>
      </div>
    </div>
    </div>
  </div>
</div>
</section>


<div class="border-top-black is-visible" id="top">
  <section class="content-section-mobile background-white">
    <div class="container content_nav-container">
      <div class="row" *ngIf="isThereAlert">
        <div class="col-lg-4 col-md-12 col-sm-12 d-md-block pt120 mb45">
          <div class="jump-nav">
            <div class="fade-in-section disable-fade-in is-visible">
              <div class="jump-nav__container" id="jump-nav" [ngClass]="{'sticky':stickyMenu && isSmallScreen}">
                <div class="jump-nav__header">
                  <div>
                    <div class="label">{{ 'market.content' | translate }}</div>
                    <h2 class="h6 bold mb0 d-block d-md-none" *ngIf="filterValue !== 'ALL'">{{ filterValue }}</h2>
                    <h2 class="h6 bold mb0 d-block d-md-none" *ngIf="filterValue === 'ALL'">{{ 'market.All' | translate }}</h2>
                  </div>
                  <div class="jump-nav__mobile" *ngIf="isSmallScreen">
                    <button class="jump-nav__mobile-button" (click)="open()">
                      <svg class="icon icon-white" [ngClass]="{'rotate-180':openedMenu}" aria-labelledby="point-down-icon" role="img" viewBox="0 0 30 30">
                        <title id="point-down-icon">Point Down Icon</title>
                        <polygon fill-rule="nonzero" points="23.354 12.075 15.499 19.929 7.646 12.075 8.353 11.368 15.498 18.514 22.646 11.367 23.354 12.075"></polygon>
                      </svg>
                    </button>
                  </div>
                </div>
                <ul class="jump-nav__items" [ngClass]="{'d-block':openedMenu}">
                  <h6 class="mb0 pt15 jump-nav__item-wrapper" #elt id="all">
                    <div>
                      <a class="jump-nav__item bold" style="cursor: pointer" (click)="filter('ALL', elt)">{{ 'market.All' | translate }}</a>
                    </div>
                  </h6>
                  <h6 class="mb0 pt15 jump-nav__item-wrapper" #elt *ngFor="let item of content">
                    <div>
                      <a class="jump-nav__item bold" style="cursor: pointer" (click)="filter(item.alerte, elt)">{{ item.alerte }}</a>
                    </div>
                  </h6>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-12 col-sm-12 border-left-black pb120-90 pt120-45 content-area-content">
          <p-progressSpinner *ngIf="!ready"></p-progressSpinner>
          <div class="free-form-content__content wysiwyg-wrapper" *ngIf="ready">
            <div>
              <h2 class="pb100" *ngIf="filterValue === 'ALL'">{{ 'market.alerts' | translate }} [{{ 'market.All' | translate }}]</h2>
              <h2 class="pb100" *ngIf="filterValue !== 'ALL'">{{ 'market.alerts' | translate }} [{{ filterValue }}]</h2>
              <div *ngFor="let con of filteredAlert  | paginate: { itemsPerPage: 5, currentPage: page, totalItems: totalItems}">
                <div>
                  <div>
                    <div class="wfb-card-wrapper pb60">
                      <div class="row no-gutters">
                        <div class="col-md-12">
                          <div class="wfb-card__body-container">
                            <div class="wfb-card__link-container">
                              <h5>
                                <span class="col-4" [ngStyle]="{'background-color':con.color}" style="padding: 2px 12px; width: 100px; margin-right: 8px;"></span>
                                <span class="col-8">{{ con.title }}</span>
                              </h5>
                            </div>
                            <div class="thee-link-container">
                              <div>
                                <div class="wfb-card__link-container">
                                  <div class="wfb-card__text col-md-4"><p style="color: darkgray; font-size: 14px">{{ 'market.publish' | translate }}: {{ con.date }}</p></div>
                                  <div class="wfb-card__text col-md-8"><p style="color: darkgray; font-size: 14px">{{ 'market.followed_by' | translate }}: {{ con.author }}</p></div>
                                </div>
                              </div>
                            </div>
                            <h6 style="font-weight: normal; margin-bottom: 0">
                              <p>
                                {{ con.text }}
                              </p>
                            </h6>
                            <div class="thee-link-container">
                              <div>
                                <div class="wfb-card__link-container">
                                  <div class="wfb-card__text col-xl-4 col-lg-4 col-md-4"><p style="position: absolute; right: 0; top: -12px;color: darkgray; font-size: 14px">{{ 'market.source' | translate }}: </p></div>
                                  <button class="wfb-card__icon pdf col-xl-2 col-lg-2 col-md-2" style="margin: 0; border: none" href="#" target="_blank">
                                    <svg class="icon" role="img" aria-labelledby="file-icon" viewBox="0 0 30 30">
                                      <title>file-icon</title>
                                      <path d="M16.667,7 L9,7 L9,24 L22,24 L22,12.308 L16.667,7 Z M17,8.742 L20.273,12 L17,12 L17,8.742 Z M10,23 L10,8 L16,8 L16,13 L21,13 L21,23 L10,23 Z" fill="#161618" fill-rule="nonzero"></path>
                                    </svg>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <pagination-controls
              style="position: absolute; bottom: 15px"
              previousLabel="{{ 'market.previous' | translate }}"
              nextLabel="{{ 'market.next' | translate }}"
              responsive="true" (pageChange)="page=$event"
              [ngStyle]="{'position': isSmallScreen ? {'position' : 'absolute', 'bottom.px' : 0} : {}}"></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
